<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
    <title>Manage Candidates</title>

    <style>
/* GLOBAL */
body {
    font-family: Arial, sans-serif;
    background-color: #f4f6f8;
    padding: 20px;
    margin: 0;
}

/* SEARCH AREA */
.search-container {
    width: 70%;
    margin: 0 auto 20px auto;
    text-align: center;
}

.search-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
}

.search-box {
    width: 32%;
    text-align: left;
}

.search-box label {
    font-weight: bold;
}

.search-input {
    width: 100%;
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
}

.btn-search {
    padding: 10px 20px;
    background: orange;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.add-btn {
    background: #007bff;
    color: white;
    padding: 8px 15px;
    text-decoration: none;
    border-radius: 5px;
    margin-left: 15%;
}

.table {
    width: 70%;
    margin: 0 auto;
    border-collapse: collapse;
    background: white;
}

.table th {
    background: #0056b3;
    color: white;
    padding: 10px;
}

.table td {
    border: 1px solid #ccc;
    padding: 10px;
}

.edit-btn {
    background: #28a745;
    color: white;
    padding: 5px 10px;
    text-decoration: none;
    border-radius: 4px;
}

.delete-btn {
    background: #dc3545;
    color: white;
    padding: 5px 10px;
    text-decoration: none;
    border-radius: 4px;
}

    </style>
</h:head>

<h:body>

<h:form>

<div class="search-container">

    <div class="search-row">
        <div class="search-box">
            <label>Candidate Name</label>
            <h:inputText value="#{candidateCDIBean.searchCandidateName}" styleClass="search-input"/>
        </div>

        <div class="search-box">
            <label>Election (ID / Name)</label>
            <h:inputText value="#{candidateCDIBean.searchElection}" styleClass="search-input"/>
        </div>

        <div class="search-box">
            <label>Party (ID / Name)</label>
            <h:inputText value="#{candidateCDIBean.searchParty}" styleClass="search-input"/>
        </div>
    </div>

    <h:commandButton value="Search" action="#{candidateCDIBean.searchCandidates}" 
                     styleClass="btn-search"/>
</div>


<!--<h:commandLink value="+ Add New Candidate" 
               action="AddCandidate.xhtml"
               styleClass="add-btn"/>-->



<table class="table">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Nomination Date</th>
        <th>Election</th>
        <th>Party</th>
        <th colspan="2">Action</th>
    </tr>

    <ui:repeat value="#{candidateCDIBean.candidatesList != null ? candidateCDIBean.candidatesList : candidateCDIBean.allCandidates}" var="c">
        <tr>
            <td>#{c.candidateId}</td>
            <td>#{c.candidateName}</td>
            <td>
                <h:outputText value="#{c.nominationDate}">
                    <f:convertDateTime pattern="dd-MM-yyyy"/>
                </h:outputText>
            </td>
            <td>#{c.elections.electionName}</td>
            <td>#{c.party.partyName}</td>

            <td><h:commandLink value="Edit" action="#{candidateCDIBean.loadCandidate(c.candidateId)}" styleClass="edit-btn"/></td>
            <td><h:commandLink value="Delete" onclick="return confirm('Are you sure?');"
                               action="#{candidateCDIBean.deleteCandidate(c.candidateId)}"
                               styleClass="delete-btn"/></td>
        </tr>
    </ui:repeat>
</table>

</h:form>

</h:body>
</html>
